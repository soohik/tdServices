package model

import (
	validation "github.com/go-ozzo/ozzo-validation/v4"
)

// User has a name, department and created date. Name and created are required, department is optional.
// Id is auto-generated by database after the user is persisted.
// json is for couchdb

type SearchContents struct {
	Phone      string `json:"phone"`
	Agent      int    `json:"agent"`
	QueryName  string `json:"queryname"`
	QueryPhone string `json:"queryphone"`
	Pageindex  int    `json:"index"`
	Pagesize   int    `json:"size"`
}

// uid bigint
// cid bigint
// cname varchar(45)
// fphone varchar(45)
// agent int

type Groupcontacts struct {
	Uid    int32  `json:"uid"`
	Cid    int32  `json:"cid"`
	Cname  string `json:"cname"`
	Fphone string `json:"fphone"` //从那个账号导入的
	Agent  int    `json:"agent"`
}

type SaveGroup struct {
	Uid   int32  `json:"uid"`
	Phone string `json:"phone"`
	Agent int    `json:"agent"`
}

type SaveChat struct {
	Cid   int64  `json:"Cid"`
	Phone string `json:"phone"`
	Agent int    `json:"agent"`
}

type AddContacts struct {
	Phone    string   `json:"phone"`
	Contents []string `json:"contents"`
}

type Agent struct {
	Phone string `json:"phone"`
	Agent int    `json:"agent"`
}

// User has a name, department and created date. Name and created are required, department is optional.
// Id is auto-generated by database after the user is persisted.
// json is for couchdb
type Text struct {
	Name  string `json:"name"`
	Agent int    `json:"agent"`
}

// User has a name, department and created date. Name and created are required, department is optional.
// Id is auto-generated by database after the user is persisted.
// json is for couchdb
type Me struct {
	Name  string `json:"name"`
	Agent int    `json:"agent"`
}

// ALTER TABLE `td`.`groups`
// ADD COLUMN `verified` INT NULL DEFAULT 0 COMMENT '1 需要验证' AFTER `linkurl`;
//所有加入的公共组

type Groups struct {
	Uid      string `json:"uid"`
	Name     string `json:"name"`
	Linkurl  string `json:"linkurl"`
	Agent    int    `json:"agent"`
	Verified int    `json:"Verified"`
}

//自己创建的
type Groupinfos struct {
	Chatid    int64  `json:"chatid"`
	Uid       int32  `json:"uid"`
	Phone     string `json:"phone"`
	Groupname string `json:"groupname"`
	Linkurl   string `json:"linkurl"`
	Agent     int    `json:"agent"`
}

type Friends struct {
	Phone string  `json:"phone"`
	Cids  []int32 `json:"cids"`
	Title string  `json:"title"`
	Uname string  `json:"name"`
}

// Validate validates a newly created user, which has not persisted to database yet, so Id is empty
func (f Friends) Validate() error {

	return validation.ValidateStruct(&f,
		// Street cannot be empty, and the length must between 5 and 50
		validation.Field(&f.Phone, validation.Required),
	)
}

type Contacts struct {
	Account      string `json:"account"`
	Contactid    int    `json:"contactid"`
	Contactphone string `json:"contactphone"`
	Contactname  string `json:"contactname"`
	Status       string `json:"status"`
}

// SELECT `taskinfo`.`tid`,
//     `taskinfo`.`account`,
//     `taskinfo`.`groupid`,
//     `taskinfo`.`groupname`,
//     `taskinfo`.`counts`,
//     `taskinfo`.`cron`,
//     `taskinfo`.`cycle`,
//     `taskinfo`.`text`,
//     `taskinfo`.`createtime`
// FROM `td`.`taskinfo`;

type Taskinfo struct {
	Tid       int    `json:"tid"`
	Account   string `json:"account"`
	Groupid   string `json:"groupid"`
	Groupname string `json:"groupname"`
	Counts    int    `json:"counts"`
	Cron      int    `json:"cron"`
	Cycle     int    `json:"cycle"`
	Text      string `json:"text"`
}

//任务记录
type Tasklog struct {
	Tid      int    `json:"tid"`
	Counts   int    `json:"counts"`
	Countsed int    `json:"Countsed"`
	Status   int    `json:"status"`
	Operid   int    `json:"operid"`
	Logs     string `json:"Logs"`
}
